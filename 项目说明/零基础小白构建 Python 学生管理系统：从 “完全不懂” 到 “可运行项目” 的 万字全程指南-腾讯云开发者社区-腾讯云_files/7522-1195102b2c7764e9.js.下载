"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7522],{30520:function(e,n,t){var c=t(97458),a=(t(52983),t(51865)),i=t.n(a),o=t(64237),s=t(22675),l=t(55533),r=o.ZP.create((function(e){var n=e.objectId,t=e.module,a=e.sortField,r=e.hostIndex,d=e.onTotalChange,u=e.comment_ban,m=e.subObjectId,h=e.beforeCheck,v=e.showKeyboard,x=(0,o.dd)();return(0,c.jsx)(s.Z,{visible:x.visible,className:i()("mod-m-comment"),onClose:x.remove,closeable:!0,children:(0,c.jsx)(l.Z,{module:t,objectId:n,sortField:a,hostIndex:r,onTotalChange:d,comment_ban:u,subObjectId:m,beforeCheck:h,showKeyboard:v})})}));n.Z=r},55533:function(e,n,t){t.d(n,{Z:function(){return ce}});var c=t(36690),a=t(93089),i=t(97458),o=t(52983),s=t(51865),l=t.n(s),r=t(60947),d=t(92336),u=t(4213),m=t(58696),h=t(33189),v=t(12994),x=o.createContext({}),j=function(){return(0,o.useContext)(x)},f=function(e){return(0,i.jsx)(x.Provider,{value:e.initialValue,children:e.children})},_=t(45165),g=t(21498),p=t(617),b="cdc-comment-response-single-edit";function N(){return(0,i.jsxs)("div",{className:"".concat(b,"__main"),onClick:function(){h.x.show({s_url:location.href.includes("?")?"".concat(location.href,"&pos=comment"):"".concat(location.href,"?pos=comment")})},children:[(0,i.jsx)("span",{children:"\u767b\u5f55"}),"\u540e\u53c2\u4e0e\u8bc4\u8bba"]})}function k(){var e=(0,m.uZ)();return(0,i.jsxs)("div",{className:"".concat(b,"__main"),children:["\u4f60\u9700\u8981",(0,i.jsx)("a",{href:"https://console.".concat(e,"/developer/security"),target:"_blank",children:"\u5b8c\u5584\u624b\u673a\u53f7"}),"\u540e\u53c2\u4e0e\u8bc4\u8bba"]})}var C=function(e){var n,t,c,a=e.className,s=e.status,h=e.showAvatar,x=void 0===h||h,f=e.placeholder,C=void 0===f?"\u671f\u5f85\u4f60\u7684\u7cbe\u5f69\u8bc4\u8bba":f,Z=e.maxLength,I=void 0===Z?300:Z,y=e.replyId,w=e.onHide,L=e.subObjectId,S=(0,m.kP)(),E=(0,o.useState)(""),P=E[0],O=E[1],T=j(),F=T.module,M=T.objectId,z=T.mutate,B=T.beforeCheck,J=(0,o.useState)([0,0]),U=J[0],K=J[1],A=(0,_.u)({module:F,objectId:M,pCommentId:y,subObjectId:L}),V=A.submitting,D=A.addComment,H=(0,g.wb)().realNameCheck;return(0,i.jsx)("div",{className:l()(b,a,s,{"not-logged":!(null===S||void 0===S?void 0:S.isLogined)||!(null===(n=S.userInfo)||void 0===n?void 0:n.isComplete),overload:P.length>I}),children:(0,i.jsxs)("div",{className:"".concat(b,"__inner"),children:[x&&(0,i.jsx)(u.Z,{className:"".concat(b,"__avatar cdc-comment__avatar"),shape:"circle",avatar:(null===S||void 0===S||null===(t=S.userInfo)||void 0===t?void 0:t.avatarUrl)||"empty"}),(null===S||void 0===S?void 0:S.isLogined)?(null===(c=S.userInfo)||void 0===c?void 0:c.isComplete)?(0,i.jsxs)("div",{className:"".concat(b,"__main"),children:[(0,i.jsxs)("div",{className:"".concat(b,"__textarea-box"),children:[(0,i.jsx)("div",{className:"".concat(b,"__text"),children:P}),(0,i.jsx)("textarea",{className:"".concat(b,"__textarea cdc-comment__textarea"),placeholder:C,value:P,onChange:function(e){O(e.target.value)},onMouseUp:function(e){K([e.target.selectionStart,e.target.selectionEnd])},onKeyUp:function(e){K([e.target.selectionStart,e.target.selectionEnd])}})]}),(0,i.jsxs)("div",{className:"".concat(b,"__operate"),children:[(0,i.jsxs)("span",{className:"".concat(b,"__count"),children:[(0,i.jsx)("span",{className:"dynamic-count",children:P.length}),(0,i.jsxs)("span",{className:"total-count",children:["/",I]})]}),(0,i.jsx)(p.Z,{onChange:function(e){var n=P.slice(0,U[0]),t=P.slice(U[1]),c="[".concat(e,"]");K([U[0]+c.length,U[1]+c.length]),O(n+c+t)}}),(0,i.jsx)(v.zx,{className:"".concat(b,"__commit"),type:V?"loading":"primary",disabled:0===P.length||P.length>I,onClick:(0,r.Z)((function(){var e,n;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return B?[4,B()]:[3,2];case 1:if(!t.sent())return[2];t.label=2;case 2:return H(((e={}).type="comment",e))?[4,D(((n={}).content=P,n))]:[2];case 3:return t.sent(),null===w||void 0===w||w(),O(""),[4,z()];case 4:return t.sent(),[2]}}))})),children:"\u53d1\u8868"})]})]}):(0,i.jsx)(k,{}):(0,i.jsx)(N,{})]})})},Z=t(3135),I=t(94209),y=t(60651),w=t(3485),L=t(60957),S=t(10185),E=t(1813),P=t(64237),O=t(93062),T=t(84300),F=t(73981),M=t(97551),z=t(46700),B=t(56799),J=t(30520),U=function(e){var n=document.createElement("textarea");return n.innerHTML=e,n.value},K=t(89463),A="cdc-comment-response-panel";function V(e){var n,t=e.commentId,s=e.createTime,x=e.content,f=e.from,g=e.to,p=e.subComments,b=void 0===p?[]:p,N=e.isLike,k=e.index,C=e.likeNum,Z=e.host,I=e.subObjectId,y=(0,m.kP)(),S=j(),E=S.objectId,O=S.module,T=S.comment_ban,F=(null===y||void 0===y?void 0:y.isLogined)&&f.uid===(null===(n=y.userInfo)||void 0===n?void 0:n.uid),M=(0,_.u)({objectId:E,module:O,pCommentId:t,subObjectId:I}).addComment,z=(0,m.Fe)(),H=(0,o.useRef)(null),R=(0,o.useCallback)((function(e){"miniprogram"!==z||window.open("/developer/user/".concat(e))}),[z]);return(0,o.useEffect)((function(){var e=H.current;(0,K.F)(e)}),[]),(0,i.jsx)("div",{className:l()(A),children:(0,i.jsxs)("div",{className:"".concat(A,"__inner"),children:[(0,i.jsxs)("div",{className:"".concat(A,"__hd"),children:[(0,i.jsx)(w.Z,{uid:f.uid,children:(0,i.jsx)("div",{className:"".concat(A,"__avatar-bubble"),children:"miniprogram"===z?(0,i.jsx)(u.Z,{className:"".concat(A,"__avatar cdc-comment__avatar"),shape:"circle",avatar:f.avatarUrl,onClick:function(){R(f.uid)}}):(0,i.jsx)(u.Z,{className:"".concat(A,"__avatar cdc-comment__avatar"),shape:"circle",avatar:f.avatarUrl,href:"/developer/user/".concat(f.uid)})})}),(0,i.jsxs)("div",{className:"".concat(A,"__name"),children:["miniprogram"===z?(0,i.jsx)("span",{onClick:function(){R(f.uid)},children:f.nickname}):(0,i.jsx)("a",{href:"/developer/user/".concat(f.uid),target:"_blank",onClick:function(){},children:f.nickname}),F&&(0,i.jsx)("span",{className:"".concat(A,"__name-mine"),children:"\u6211"}),Boolean(g)&&(0,i.jsxs)("span",{className:"".concat(A,"__name-replay"),children:[(0,i.jsx)("em",{children:"\u56de\u590d"}),"miniprogram"===z?(0,i.jsx)("span",{onClick:function(){R(null===g||void 0===g?void 0:g.uid)},children:null===g||void 0===g?void 0:g.nickname}):(0,i.jsx)("a",{href:"/developer/user/".concat(f.uid),target:"_blank",children:null===g||void 0===g?void 0:g.nickname})]})]}),(0,i.jsx)("div",{className:"".concat(A,"__date"),children:(0,i.jsx)(L.Z,{time:s})})]}),(0,i.jsx)("div",{className:"".concat(A,"__content is-pc"),ref:H,children:U(x).replace(/\n+/g,"\n").replace(/^[\n]+|[\n]+$/g,"")}),(0,i.jsx)("div",{className:"".concat(A,"__content is-mobile"),onClick:function(){var e;return 1===T?v.N3.show({type:"info",tip:"\u4f5c\u8005\u5df2\u5173\u95ed\u8bc4\u8bba\uff0c\u65e0\u6cd5\u64cd\u4f5c\u3002"}):(null===y||void 0===y?void 0:y.isLogined)?void(!F&&(null===y||void 0===y||null===(e=y.userInfo)||void 0===e?void 0:e.isComplete)&&P.ZP.show(B.Z,{btn:"\u53d1\u8868",placeholder:"\u56de\u590d ".concat(f.nickname),onSubmit:function(){var e=(0,r.Z)((function(e){var n;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return[4,M(((n={}).content=e,n))];case 1:return t.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})):h.x.show()},children:(0,i.jsx)(v.JQ,{content:x.replace(/\n+/g,"\n").replace(/^[\n]+|[\n]+$/g,""),convertElementTextToImages:K.F})}),(0,i.jsx)(D,{commentId:t,subCommentsNum:b.length,from:f,likeNum:C,isLike:N,subComments:b,subObjectId:I}),b.length>0&&(0,i.jsxs)("div",{className:l()("".concat(A,"__replay is-mobile")),children:[(0,i.jsx)("div",{className:"".concat(A,"__replay-m-inner"),children:b.slice(0,Z?b.length:2).map((function(e){return(0,o.createElement)(V,(0,a.Z)((0,c.Z)({},e),{key:e.commentId}))}))}),!Z&&b.length>2&&(0,i.jsxs)("div",{className:"".concat(A,"-m-spread"),onClick:function(){P.ZP.show(J.Z,{module:O,objectId:E,hostIndex:k,comment_ban:T})},children:["\u67e5\u770b\u5168\u90e8",b.length,"\u6761\u56de\u590d",(0,i.jsx)("i",{className:"".concat(A,"-m-spread-icon")})]})]})]})})}function D(e){var n,t,c=e.commentId,a=e.subCommentsNum,s=e.from,u=e.likeNum,x=e.isLike,f=e.subComments,g=e.subObjectId,p=(0,o.useState)(!1),b=p[0],N=p[1],k=(0,o.useState)(!1),Z=k[0],I=k[1],w=(0,m.kP)(),L=(null===w||void 0===w?void 0:w.isLogined)&&(null===(n=w.userInfo)||void 0===n?void 0:n.uid)===s.uid,E=!(null===w||void 0===w?void 0:w.isLogined)||!L,M=L||Boolean((null===w||void 0===w?void 0:w.isLogined)&&(null===(t=w.userInfo)||void 0===t?void 0:t.isAdmin)),z=j(),J=z.mutate,U=z.objectId,K=z.module,V=z.comment_ban,D=(0,_.u)({module:K,objectId:U,pCommentId:c,subObjectId:g}).addComment,$=(0,o.useCallback)((function(){if(!(null===w||void 0===w?void 0:w.isLogined))return h.x.show();P.ZP.show(O.Z,{caption:"\u4e3e\u62a5",objId:c,type:T.C2.comment})}),[null===w||void 0===w?void 0:w.isLogined,c]),Q=(0,o.useCallback)((0,r.Z)((function(){var e;return(0,d.__generator)(this,(function(n){switch(n.label){case 0:return e={},[4,P.ZP.show(F.Z,(e.title="\u6e29\u99a8\u63d0\u793a",e.desc="\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417\uff1f",e.objId=c,e.module=T.C2.comment,e))];case 1:return n.sent(),J(),[2]}}))})),[c,J]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"".concat(A,"__operates"),children:[(!L||a>0)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"".concat(A,"__operate is-pc"),onClick:function(){if(1===V&&0===f.length)return v.N3.show({type:"info",tip:"\u4f5c\u8005\u5df2\u5173\u95ed\u8bc4\u8bba\uff0c\u65e0\u6cd5\u64cd\u4f5c\u3002"});L||N(!Z),f.length>0&&I(!Z)},children:(0,i.jsx)(v.JO,{iconName:l()("ask",{"is-click":b}),className:"link",iconNumber:Z?"\u6536\u8d77\u56de\u590d":a>0?(0,S.Z)(a):"\u56de\u590d"})}),(0,i.jsx)("span",{className:"".concat(A,"__operate is-mobile"),onClick:function(){var e;return 1===V?v.N3.show({type:"info",tip:"\u4f5c\u8005\u5df2\u5173\u95ed\u8bc4\u8bba\uff0c\u65e0\u6cd5\u64cd\u4f5c\u3002"}):(null===w||void 0===w?void 0:w.isLogined)?void(!L&&(null===w||void 0===w||null===(e=w.userInfo)||void 0===e?void 0:e.isComplete)&&P.ZP.show(B.Z,{btn:"\u53d1\u8868",placeholder:"\u56de\u590d ".concat(s.nickname),onSubmit:function(){var e=(0,r.Z)((function(e){var n;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return[4,D(((n={}).content=e,n))];case 1:return t.sent(),J(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})):h.x.show()},children:(0,i.jsx)(v.JO,{iconName:l()("ask"),className:"link",iconNumber:a>0?(0,S.Z)(a):"\u56de\u590d"})})]}),(0,i.jsx)(H,{likeNum:u,isLike:1===x,commentId:c}),M&&E?(0,i.jsx)(y.x,{className:"".concat(A,"__operate-dropdown"),content:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"".concat(A,"__operate-dropdown-inner"),children:[(0,i.jsx)("div",{className:"dropdown-item",onClick:Q,children:(0,i.jsx)(v.le,{name:"delete",content:"\u5220\u9664"})}),(0,i.jsx)("div",{className:"dropdown-item",onClick:$,children:(0,i.jsx)(v.le,{name:"warning-triangle",content:"\u4e3e\u62a5"})})]})}),arrowPointAtCenter:!0,placement:"bottom-start",children:(0,i.jsx)("div",{children:(0,i.jsx)(v.JO,{iconName:"more",iconNumber:"\u66f4\u591a"})})}):(0,i.jsxs)(i.Fragment,{children:[E&&(0,i.jsx)("span",{className:"".concat(A,"__operate"),onClick:$,children:(0,i.jsx)(v.JO,{iconName:"report",iconNumber:"\u4e3e\u62a5",className:"link"})}),M&&(0,i.jsx)("span",{className:"".concat(A,"__operate"),onClick:Q,children:(0,i.jsx)(v.JO,{iconName:"delete",iconNumber:"\u5220\u9664",className:"link"})})]})]}),(0,i.jsx)("div",{className:"".concat(A,"__edit"),style:b?{display:"block"}:{display:"none"},children:(0,i.jsx)(C,{showAvatar:!1,placeholder:"\u56de\u590d ".concat(s.nickname,"\uff1a"),replyId:c,onHide:function(){N(!1),0===f.length&&I(!1)},subObjectId:g})}),f.length>0&&Z&&(0,i.jsx)(R,{subComments:f})]})}function H(e){var n=e.isLike,t=e.commentId,c=e.likeNum,a=(0,E.J)({isLike:n,likeNum:c,commentId:t}),o=a.toggleLike,s=a.isLike,r=a.likeNum;return(0,i.jsx)("span",{className:"".concat(A,"__operate"),onClick:o,children:(0,i.jsx)(v.JO,{iconName:"like",iconNumber:r>0?(0,S.Z)(r):"\u70b9\u8d5e",className:l()("link",{"is-like":s})})})}function R(e){var n=e.subComments,t=(0,o.useState)(1),s=t[0],l=t[1],r=(0,o.useMemo)((function(){return(0,z.Z)(n,5)[s-1]}),[s,n]);return(0,i.jsx)("div",{className:"".concat(A,"__replay"),children:(0,i.jsxs)("div",{className:"".concat(A,"__replay-m-inner"),children:[null===r||void 0===r?void 0:r.map((function(e){return(0,o.createElement)(V,(0,a.Z)((0,c.Z)({},e),{key:e.commentId}))})),(0,i.jsx)(M.Z,{recordCount:n.length,current:s,onPagingChange:function(e){l(e)},pageSize:5})]})})}var $=V,Q="cdc-operate-footer";function q(){return(0,i.jsx)("div",{className:l()("".concat(Q,"__toggle is-logout")),onClick:function(){h.x.show()},children:(0,i.jsxs)("div",{className:"".concat(Q,"__toggle-text"),children:[(0,i.jsx)("span",{children:"\u767b\u5f55 "}),"\u540e\u53c2\u4e0e\u8bc4\u8bba"]})})}function G(){return(0,i.jsx)("div",{className:l()("".concat(Q,"__toggle is-logout")),children:(0,i.jsx)("div",{className:"".concat(Q,"__toggle-text"),children:"\u4f5c\u8005\u5df2\u5173\u95ed\u8bc4\u8bba"})})}function W(){(0,m.kP)();var e=(0,m.uZ)();return(0,i.jsx)("div",{className:l()("".concat(Q,"__toggle is-logout")),children:(0,i.jsxs)("div",{className:"".concat(Q,"__toggle-text"),children:[(0,i.jsx)("a",{href:"https://console.".concat(e,"/developer/security"),target:"_blank",children:"\u5b8c\u5584\u624b\u673a\u53f7"}),"\u540e\u53c2\u4e0e\u8bc4\u8bba"]})})}var X=function(e){var n,t=e.from,c=e.pCommentId,a=e.showKeyboard,s=(0,m.kP)(),u=j(),h=u.module,v=u.objectId,x=u.mutate,f=u.comment_ban,p=u.beforeCheck,b=(0,_.u)({module:h,objectId:v,pCommentId:c}).addComment,N=(0,g.wb)().realNameCheck;return(0,o.useEffect)((function(){a&&P.ZP.show(B.Z,{btn:"\u53d1\u8868",placeholder:"\u671f\u5f85\u4f60\u7684\u7cbe\u5f69\u8bc4\u8bba",onSubmit:function(){var e=(0,r.Z)((function(e){var n,t;return(0,d.__generator)(this,(function(c){switch(c.label){case 0:return N(((n={}).type="comment",n))?[4,b(((t={}).content=e,t))]:[2];case 1:return c.sent(),x(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})}),[a]),(0,i.jsx)("div",{className:l()(Q),children:(0,i.jsx)("div",{className:"".concat(Q,"__inner"),children:1===f?(0,i.jsx)(G,{}):(null===s||void 0===s?void 0:s.isLogined)?(null===(n=s.userInfo)||void 0===n?void 0:n.isComplete)?(0,i.jsxs)("div",{className:l()("".concat(Q,"__toggle")),onClick:function(){P.ZP.show(B.Z,{btn:"\u53d1\u8868",placeholder:t?"\u56de\u590d ".concat(t.nickname):"\u671f\u5f85\u4f60\u7684\u7cbe\u5f69\u8bc4\u8bba",onSubmit:function(){var e=(0,r.Z)((function(e){var n,t;return(0,d.__generator)(this,(function(c){switch(c.label){case 0:return p?[4,p()]:[3,2];case 1:if(!c.sent())return[2];c.label=2;case 2:return N(((n={}).type="comment",n))?[4,b(((t={}).content=e,t))]:[2];case 3:return c.sent(),x(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})},children:[(0,i.jsx)("i",{className:l()("".concat(Q,"__toggle-icon"))}),(0,i.jsx)("div",{className:"".concat(Q,"__toggle-text"),children:"\u671f\u5f85\u4f60\u7684\u7cbe\u5f69\u8bc4\u8bba\uff01"})]}):(0,i.jsx)(W,{}):(0,i.jsx)(q,{})})})},Y=t(68295),ee="cdc-comment-response-single-edit";var ne=function(){var e,n=(0,m.kP)();return(0,i.jsx)("div",{className:l()(ee,"not-logged"),children:(0,i.jsxs)("div",{className:"".concat(ee,"__inner"),children:[(0,i.jsx)(u.Z,{className:"".concat(ee,"__avatar cdc-comment__avatar"),shape:"circle",avatar:(null===n||void 0===n||null===(e=n.userInfo)||void 0===e?void 0:e.avatarUrl)||"empty"}),(0,i.jsx)("div",{className:"".concat(ee,"__main"),children:"\u4f5c\u8005\u5df2\u5173\u95ed\u8bc4\u8bba"})]})})},te="cdc-comment-response";var ce=function(e){var n,t=e.module,s=e.objectId,r=e.sortField,d=e.className,u=e.hostIndex,h=e.onTotalChange,x=e.comment_ban,j=e.subObjectId,_=e.beforeCheck,g=e.showKeyboard,p=(0,o.useState)(r),b=p[0],N=p[1],k=(0,m.kP)(),y=(null===k||void 0===k?void 0:k.isLogined)&&!(null===(n=k.userInfo)||void 0===n?void 0:n.notifyAction.includes("comment")),w=function(e){var n,t,i,o,s=(0,Z.ZP)((function(n){return{url:"/api/comment/nest-list",params:(0,c.Z)({page:n+1},e)}}),(function(e){return(0,I.Ro)((0,a.Z)((0,c.Z)({},e.params),{pagesize:10}))})),l=s.data,r=s.setSize,d=s.isLoading,u=s.mutate,m=s.isValidating,h=l?l.filter(Boolean).map((function(e){return e.list})).flat():[],v=null!==(i=null===l||void 0===l||null===(n=l[0])||void 0===n?void 0:n.total)&&void 0!==i?i:0,x=null!==(o=null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t.validTotal)&&void 0!==o?o:0;return{list:h,isLoading:d,total:v,isEmpty:!d&&0===h.length,isReachingEnd:Boolean(!d&&h.length>=v),setSize:r,mutate:u,isValidating:m,validTotal:x}}({objectId:s,module:t,sortField:b}),L=w.list,S=w.isLoading,E=w.isEmpty,O=w.isReachingEnd,T=w.setSize,F=w.mutate,M=w.isValidating,z=w.validTotal,B=void 0!==u,U=(0,o.useCallback)((function(){T((function(e){return e+1}))}),[T]),K=(0,o.useMemo)((function(){return void 0!==u?[L[u]]:L}),[L,u]);return(0,o.useEffect)((function(){null===h||void 0===h||h(z)}),[z,h]),(0,i.jsx)(f,{initialValue:{module:t,objectId:s,mutate:F,comment_ban:x,beforeCheck:_},children:(0,i.jsxs)("div",{className:l()(te,d,{"is-host":B,"is-blank":E}),children:[1===x?(0,i.jsx)(ne,{}):(0,i.jsx)(C,{subObjectId:j}),!E&&(0,i.jsxs)("div",{className:"".concat(te,"__toolbar"),children:[(0,i.jsxs)("div",{className:"".concat(te,"__number"),children:[z," \u6761\u8bc4\u8bba"]}),Boolean(b)&&(0,i.jsx)("div",{className:"".concat(te,"__segment"),children:[{value:"likeNum",label:"\u70ed\u5ea6"},{value:"timeline",label:"\u6700\u65b0"}].map((function(e){return(0,i.jsx)("div",{className:l()("".concat(te,"__segment-item"),{"is-active":b===e.value}),onClick:function(){N(e.value)},children:e.label},e.value)}))})]}),B&&(0,i.jsxs)("div",{className:"".concat(te,"-head"),children:[(0,i.jsx)("i",{className:"".concat(te,"-head-return"),onClick:function(){P.ZP.show(J.Z,{module:t,objectId:s,sortField:"likeNum",comment_ban:x})}}),K[0].subComments.length,"\u6761\u8bc4\u8bba"]}),(0,i.jsx)("div",{className:"".concat(te,"-inner"),children:(0,i.jsxs)("div",{className:l()("".concat(te,"__body"),{"is-blank":E}),children:[y&&(0,i.jsx)(v.Ch,{visible:!0,className:"".concat(te,"__note"),tip:(0,i.jsxs)(i.Fragment,{children:["\u5f00\u542f\xa0",(0,i.jsx)("a",{href:"/developer/user/settings/notification",target:"_blank",children:"\u6d88\u606f\u901a\u77e5"}),"\uff0c\u7b2c\u4e00\u65f6\u95f4\u83b7\u53d6\u8bc4\u8bba\u6d88\u606f\u53c2\u4e0e\u4e92\u52a8"]})}),E&&(0,i.jsxs)("div",{className:"".concat(te,"__blank"),children:[(0,i.jsx)("i",{className:"".concat(te,"__blank-img")}),(0,i.jsx)("div",{className:"".concat(te,"__blank-tip"),children:"\u6682\u65e0\u8bc4\u8bba"})]}),K.length>0&&(0,i.jsx)("div",{className:"".concat(te,"__list"),children:K.filter(Boolean).map((function(e,n){return(0,o.createElement)($,(0,a.Z)((0,c.Z)({},e),{host:B,key:e.commentId,index:n}))}))}),!B&&(0,i.jsx)(Y.Z,{loadingType:"click",className:"".concat(te,"__more"),loadMore:U,isLoading:S||M,isReachingEnd:O})]})}),(0,i.jsx)(X,{showKeyboard:g})]})})}},617:function(e,n,t){var c=t(39556);n.Z=c.Z},56799:function(e,n,t){var c=t(60947),a=t(37705),i=t(92336),o=t(97458),s=t(52983),l=t(51865),r=t.n(l),d=t(64237),u=t(22675),m=t(21498),h=t(39556),v=t(93544),x="mod-m-keyboard",j=d.ZP.create((function(e){var n,t=e.type,l=e.magnify,j=void 0===l||l,f=e.btn,_=e.maxLength,g=void 0===_?300:_,p=e.placeholder,b=e.onSubmit,N=e.defaultValue,k=(0,s.useState)(N||""),C=k[0],Z=k[1],I=(0,d.dd)(),y=(0,s.useState)(null),w=y[0],L=y[1],S=(0,s.useState)(!1),E=S[0],P=S[1],O=((0,m.wb)().realNameCheck,(0,s.useState)([0,0])),T=O[0],F=O[1],M=v.t.get("recentEmojiList")||[];return(0,s.useEffect)((function(){null===w||void 0===w||w.focus()}),[w]),(0,o.jsx)(u.Z,{visible:I.visible,onClose:I.remove,className:r()(x,(n={},(0,a.Z)(n,"is-".concat(t),t),(0,a.Z)(n,"is-magnify",E),n)),zIndex:1010,closeByClickMask:!0,children:(0,o.jsxs)("div",{className:r()("".concat(x,"-inner")),children:[j&&(0,o.jsx)("div",{className:"".concat(x,"-magnify"),onClick:function(){P(!E)},children:(0,o.jsx)("i",{})}),(0,o.jsx)("div",{className:"".concat(x,"-input-box"),children:"search"===t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"".concat(x,"-icon-search")}),(0,o.jsx)("input",{type:"text",className:"".concat(x,"-input"),placeholder:p,value:C,maxLength:g,autoFocus:!0,ref:function(e){L(e)},onChange:function(e){Z(e.target.value)}})]}):(0,o.jsx)("textarea",{className:"".concat(x,"-textarea"),placeholder:p,ref:function(e){L(e)},onChange:function(e){Z(e.target.value)},onMouseUp:function(e){F([e.target.selectionStart,e.target.selectionEnd])},onKeyUp:function(e){F([e.target.selectionStart,e.target.selectionEnd])},autoFocus:!0,value:C,maxLength:g})}),Boolean(f)&&(0,o.jsxs)("div",{className:"".concat(x,"-foot"),children:[(0,o.jsx)("span",{children:"\u6700\u8fd1\u4f7f\u7528"}),(0,o.jsxs)("div",{className:"".concat(x,"-opt"),children:[g&&(0,o.jsxs)("div",{className:"".concat(x,"-words"),children:[C.length>g?(0,o.jsx)("em",{children:C.length}):C.length,"/",g]}),(0,o.jsx)("div",{className:r()("".concat(x,"-btn"),{"is-disabled":0===C.length||g&&C.length>g}),onClick:(0,c.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,b(C)];case 1:return e.sent(),Z(""),I.remove(),[2]}}))})),children:f})]})]}),(0,o.jsx)("div",{className:"".concat(x,"-emoji-box"),children:M.map((function(e){return(0,o.jsx)("i",{className:"".concat(x,"-emoji-icon"),style:{backgroundImage:"url(".concat(e.source,")")},onClick:function(){var n=C.slice(0,T[0]),t=C.slice(T[1]),c="[".concat(e.text,"]");F([T[0]+c.length,T[1]+c.length]),Z(n+c+t)}},e.id)}))}),(0,o.jsx)("div",{className:"".concat(x,"-emoji-main"),children:(0,o.jsx)(h.Z,{onChange:function(e){var n=C.slice(0,T[0]),t=C.slice(T[1]),c="[".concat(e,"]");F([T[0]+c.length,T[1]+c.length]),Z(n+c+t)},comCls:"mod-m-keyboard",isMobile:!0})})]})})}));n.Z=j},97551:function(e,n,t){var c=t(36690),a=t(97458),i=(t(52983),t(35203)),o=t.n(i),s="cdc-pagination";n.Z=function(e){var n,t;return Math.ceil(e.recordCount/(null!==(n=e.pageSize)&&void 0!==n?n:10))<=1?null:(0,a.jsxs)("div",{className:s,children:[(0,a.jsxs)("span",{className:"".concat(s,"__total-page"),children:["\u5171",Math.ceil(e.recordCount/(null!==(t=e.pageSize)&&void 0!==t?t:10)),"\u9875"]}),(0,a.jsx)(o(),(0,c.Z)({},e))]})}},60957:function(e,n,t){t.d(n,{Z:function(){return r}});var c=t(36690),a=t(93089),i=t(59106),o=t(97458),s=(t(52983),t(11001)),l=function(e,n){return Math.floor(e/n)};function r(e){var n=e.time,t=e.style,c=e.className,a=void 0===c?"":c,i=e.formatType;if("number"!==typeof n)return(0,o.jsx)("span",{children:n});if(isNaN(n))return(0,o.jsx)("span",{children:"\u672a\u77e5\u65f6\u95f4"});10===String(n).length&&(n*=1e3);var r=(0,s.Z)(new Date(n),"yyyy-MM-dd HH:mm:ss"),u=(new Date).getTime()-n,m=function(e){var n=e.unit,c=e.noDuration;return(0,o.jsxs)(d,{dateTime:r,className:a,children:[!c&&" ",!c&&(0,o.jsx)("span",{style:t,children:u}),"".concat(n)]})};return(u=l(u,1e3))<60?(0,o.jsx)(m,{unit:"\u521a\u521a",noDuration:!0}):(u=l(u,60))<60?(0,o.jsx)(m,{unit:"\u5206\u949f\u524d"}):(u=l(u,60))<24?(0,o.jsx)(m,{unit:"\u5c0f\u65f6\u524d"}):(u=l(u,24))<31?(0,o.jsx)(m,{unit:"\u5929\u524d"}):(0,o.jsx)(d,{dateTime:r,style:t,className:a,children:i?(0,s.Z)(new Date(n),i):" ".concat(r.split(" ")[0])})}function d(e){var n=e.dateTime,t=e.children,s=(0,i.Z)(e,["dateTime","children"]);return(0,o.jsx)("time",(0,a.Z)((0,c.Z)({dateTime:n,title:n},s),{children:t}))}},46700:function(e,n,t){function c(e,n){return Array.from({length:Math.ceil(e.length/n)},(function(t,c){return e.slice(c*n,c*n+n)}))}t.d(n,{Z:function(){return c}})}}]);